

# 表锁







## 意向锁

IS

IX

读操作是意向共享锁IS

写操作是意向排他锁

### 作用

为了快速加上表锁

因为上表锁时，不能与行锁冲突

但是如果一行一行检查就很费时

所以就有意向锁

它不用我们手动操作

写操作时，会上IX，结束时会解锁，多行也应该会有引用计数



## 元数据锁

就是的表结构

在一些操作时，是不能同时改变说的结构的



## 表锁



就是锁住整个表

当我们update时

如果where条件不是索引

它就锁住整个表

为什么呢

我们假设

事务A 事务B

A中 update name = ‘yyj’ where age = 30

age不是索引，此时B 中insert age = 30

我们不是可以用行锁嘛？ 但是行锁是锁住索引的，age不是索引，锁不住

那怎么办 ，可以给age加索引

