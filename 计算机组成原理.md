## 总线

计算机数据传输的通路





## IO系统

### IO系统基本概念

#### 输入/输出系统

IO是以主机（内存）为中心



#### IO控制方式

1. 程序查询方式
2. 程序中断方式（回调函数）
3. DMA方式（批处理 & 异步IO）
4. 通道方式



### 外部设备

#### 输入设备

#### 输出设备



### IO接口

#### 功能

实现io设备与主机的交互（比如数据缓存，格式转换，地址译码和设备选择）



### IO方式



#### 程序查询方式

IO一旦开始，cpu就会一直忙等



#### 程序中断方式

中断是怎么样的

1. 中断源发起中断请求
2. 指令执行的最后阶段是中断处理，会检查是否有中断
3. 有中断，选取中断优先级max的（高速设备优先级高），根据中断表，找到对应的中断处理程序（将PC赋值为程序的首地址）
4. 保存现场（可以将寄存器的值保存到内存），执行中断处理程序



![image-20240623235307037](../../AppData/Roaming/Typora/typora-user-images/image-20240623235307037.png)

这里的寻址是间接寻址（可以解耦合）

![image-20240623235405971](../../AppData/Roaming/Typora/typora-user-images/image-20240623235405971.png)



#### DMA

它用到批处理，让DMA将外设数据，一次性的读取到内存

读完（or 读到上限）通知cpu处理（中断）

也是异步IO（异步IO的前提是有多个资源，DMA就是没有cpu也可以有别的进行磁盘IO）（异步和多线程很像）











