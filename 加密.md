# 加密



## 引入问题

数据如果是 明文（可以直接阅读），容易数据泄露

比如 数据库中的数据，被人盗了，直接使用

密码，身份证等等



## 核心

明文 -> 加密算法 + 密钥 -> 密文

密文 -> 解密算法 + 密钥 -> 明文



使用的时候用明文 （比如说：给用户看）

存储，传输等等 用密文，防止数据泄露





## CSRF



### 原因

cookie & session，它们作为用户的身份证明，每次http请求，都是会自动带上的

so，如果我们登入了，在登入之后的界面点击了别人的链接，cookie还是会自动带上的，别人就可以用这个来搞事情



核心：**跨域** **cookie自动携带**



### 解决 

1. 如果是跨域请求，cookie就不自动携带
2. cookie 存入消息体中，这样跨域请求，就不会暴露cookie





## SQL注入



### 原因

将sql语句 和 用户传入参数 **直接拼接**

比如：‘1 or ’ 1 = 1 ’



### 解决 

使用占位符 而不是 直接拼接



### 使用

如果要 执行sql语句

不要直接拼接 ，使用占位符 or 直接使用  orm框架（struct 到 sql 语句的映射）



### 关键词

sql语句执行



## 私密信息存储



如果重要信息 明文存储，那别人获取了，直接就完蛋了

so ，可以这样

如果用户要 存入 or 观看，那就是明文

但是 存储，就使用密文



那明文 和 密文 怎么转换呢

明文  用 密钥 + 加密算法 -> 密文 （存储过程）

要观看私密信息，好危险，因为http中存储了 私密信息，如果被别人拿到了，不就完了

密文 -> 密钥  + 解密算法 -> 明文 （使用）



关键：**密钥 ** **加密算法**



### 数据库

我们可以在存入 数据前，将数据 加密成 密文

在使用数据时，可以将数据解密成 明文

可以使用钩子函数 or AOP实现



### cookie 

对于 cookie 如果直接存明文，暴露了就完了

但是 可以用存密文，服务端使用时解密

暴露了 别人不知道密钥，也没有用 





### 关键词

关键词 就是 key，看到了这个key ，可以快速找到 对应知识



key 就是 **私密信息**

