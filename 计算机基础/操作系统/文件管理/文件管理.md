# 初识文件管理



# 文件的逻辑结构

它是用户看到的，操作系统不管



## 索引文件

和b+树很像，应该尽量的减少磁盘IO

磁盘一次IO就读一次磁盘块（和页的大小一样）



## 顺序文件



### 定长

我们就可以用下标随机访问



### 不定长

和redis中的zipList一样，就是可以减少存储空间（因为长度一般比指针更短）

它还是和链表一样



## 链式文件

就是用的链表



# 文件目录



# 文件的物理结构



## 连续存储

优点：遍历快

但是扩展很麻烦，如果它的后一块已经用了，它就要重新分配

还会有外部碎片



## 不连续分配



### 链式分配

就是每个块都存着下一个节点的指针

但是遍历的慢，节省空间



### 文件表

用表来记录

逻辑号 到 物理号的映射

可以随机遍历

也可以用多级表



# 文件存储空间管理



# 文件的基本操作

磁盘IO很费时，可以用缓存区来存多次的数据

再一起磁盘IO

也可以异步IO



# 文件共享_文件保护

共享就是用引用计数

还可以用上copyOnWrite

