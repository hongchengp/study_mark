# CAS

比较and交换

它是原子的

通过volatile保证可见性



它是防止上锁后，线程的切换开销（和协程很像）

任务数太多的时候，因为太多，失败概率就会很大，开销很大

CAS: 适用于线程数少于CPU的核数优势比较明显,一旦超过了cpu的核数,就没有支持你cpu支持,还是得发生
  上下文切换.且适用于多核的情况下



![image-20240515145722818](../../../AppData/Roaming/Typora/typora-user-images/image-20240515145722818.png)

这个很好的比喻

因为会有时间片轮转，还是会切换