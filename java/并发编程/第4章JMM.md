# 可见性

什么是可见性，就是A线程修改了，B线程能够看见

那就要解决两个方面，读可见，写可见

可见性的本质：缓存一致性

用volatile让它可见



读volatile变量时，在读后加入读屏障，读得从主存中读（因为线程中有缓存）

写volatile变量时，在写前加入写屏障，写完都要存入主存



# 有序性

它是因为指令的重排序（为了流水线）

用volatile修饰这样它就不会重排序

比如new，我们先赋值内存地址，后初始化，导致地址不安全





# 原子性

一个指令是原子的

但是多个指令不是原子的



上锁，让他原子性（本质还是多线程带来的不可预测性）





