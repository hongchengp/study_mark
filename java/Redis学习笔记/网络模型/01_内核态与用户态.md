为什么会有内核态与用户态的区别

因为有些指令和内存用户是不能操作的

否则可能会让电脑崩溃



如果程序要用到内核态指令，它会从用户态转换到内核态，这个过程会消耗很多时间

比如多线程，线程的切换，因为它会切换到内核态，而且会有上下文的切换（比如寄存器中的值，形参等等）。

我们就应该减少内核态与用户态的切换，这个思想是协程。



监听fd是内核态的，为什么呢？如果存储fd的内存中的值被用户改变，会引发很糟糕的事情。



![image-20240509151905002](../../../../AppData/Roaming/Typora/typora-user-images/image-20240509151905002.png)



![image-20240509151937335](../../../../AppData/Roaming/Typora/typora-user-images/image-20240509151937335.png)



什么是缓冲区，存数据的buf

比如read（fd,buf,len)   这个buf数组就是缓冲区，读取客户端发来的数据

但是呢，是用内核态读数据的，所以内核态也会有缓冲区，用户再从内核态读取数据





