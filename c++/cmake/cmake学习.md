

## 做了什么

源文件 -> 可执行文件(库）

编译 -> 目标文件 -> 可执行文件 



## 基本原理

你要做菜，你要知道 **原材料**叫什么 以及**原材料在哪里**



## 编译流程

**头文件**

#include “head.h”

它是宏 在预处理阶段 会将宏展开

就是将 head.h 这个文件 在源文件直接展开



### 预编译

将宏 和 头文件展开

它还会是文本文件

如果头文件没有改变（interface没有改变）

那它就不会改变 so 合成复用 优于 继承

因为 继承的类如果函数改变了，那函数也要改变，那所有依赖他类也都要改变

但是合成复用，如果组合 or 聚合的方法改变了，那我只需要改变我函数的实现，但是函数的签名没有改变，那依赖它的类就是不用改变 



### 编译

将 文本文件编译成 汇编文件（还是能看的）



### 汇编

-o 将汇编文件 编译成 目标文件 .o

它现在是二进制了



### 链接

将 -o 以及 库 链接 成 可执行文件

动态连接 与静态连接

**目标文件中的 其他目标文件中的变量与函数都是符号引用**

链接:  符号引用 -> 逻辑地址



### 装入

就是将文件从 磁盘装入 内存

有 页表

会将 逻辑地址 映射到 物理地址（硬件实现的，不用程序员关心）





